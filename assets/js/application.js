(function(){window.App||(window.App={}),App.refTotal=0,_.templateSettings={interpolate:/\{\{(.+?)\}\}/g}}).call(this),function(){var t=function(t,o){function n(){this.constructor=t}for(var r in o)e.call(o,r)&&(t[r]=o[r]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t},e={}.hasOwnProperty;App.Item=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.defaults={title:"Swan Lake",author:"Anonymous",ref:"1"},o}(Backbone.Model)}.call(this),function(){var t=function(t,o){function n(){this.constructor=t}for(var r in o)e.call(o,r)&&(t[r]=o[r]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t},e={}.hasOwnProperty;App.List=function(e){function o(){return o.__super__.constructor.apply(this,arguments)}return t(o,e),o.prototype.model=App.Item,o.prototype.addRandomItem=function(){var t;return t=new App.Item,++App.refTotal,t.set({title:"Undefined title",author:"Undefined author",ref:App.refTotal}),this.add(t)},o}(Backbone.Collection)}.call(this),function(){var t,e=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;App.ListView=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return e(o,t),o.prototype.el=$("#app"),o.prototype.events={"click .add":"add"},o.prototype.initialize=function(){return this.collection=new App.List,this.collection.on("add",this.addItem,this),this.template=_.template($("#listTlp").html()),this.render()},o.prototype.render=function(){return this.$el.append('<button class="add btn btn-primary">Add new book</button>'),this.$el.append('<h5>Total refs: <span id="refTotal" class="label label-success">0</span><h5/>'),this.$el.append("<hr>"),this.$el.append('<ul id="list" class="media-list">')},o.prototype.addItem=function(t){return $("#refTotal").html(App.refTotal),$("#list").append(this.template({title:t.get("title"),author:t.get("author"),ref:t.get("ref")}))},o.prototype.add=function(){return this.collection.addRandomItem()},o}(Backbone.View),t=new App.ListView}.call(this);